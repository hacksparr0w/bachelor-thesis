variable num_atoms getenv "MD_NUM_ATOMS"

units metal
atom_style atomic
boundary p p p

kim init &
  Sim_LAMMPS_ModifiedTersoff_PurjaPunMishin_2017_Si__SM_184524061456_000 &
  metal

variable silicon_atom_weight equal 28.0855
variable silicon_density equal 2.329002

variable box_volume equal ${num_atoms}*${silicon_atom_weight}*1.66053907/${silicon_density}

variable box_size equal ${box_volume}^(1/3)

region box block 0 ${box_size} 0 ${box_size} 0 ${box_size}
create_box 1 box
create_atoms 1 random ${num_atoms} 31415 box

kim interactions Si
neigh_modify every 1 check yes
mass 1 ${silicon_atom_weight}

velocity all create 4000 87287 mom yes rot yes dist gaussian
timestep 0.001
thermo 100
thermo_style custom step temp pe etotal press

run 10000

fix 1 all nvt temp 4000 1e-10 0.01
run 10000

unfix 1

velocity all set 0 0 0

min_style cg
minimize 1e-10 1e-10 1000 10000

write_data amorphous_structure.dat
